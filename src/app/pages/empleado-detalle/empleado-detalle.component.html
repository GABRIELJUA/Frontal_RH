<div *ngIf="toast.show" class="fixed bottom-5 right-5 z-[999] min-w-[260px] max-w-sm">
  <div class="text-white px-4 py-3 rounded-lg shadow-lg text-sm flex items-center gap-2" [ngClass]="{
      'bg-emerald-500': toast.type === 'success',
      'bg-red-500': toast.type === 'error',
      'bg-slate-800': toast.type === 'info'
    }">
    <span *ngIf="toast.type==='success'">✔</span>
    <span *ngIf="toast.type==='error'">✖</span>
    <span *ngIf="toast.type==='info'">ℹ</span>
    {{ toast.message }}
  </div>
</div>

<div class="max-w-5xl mx-auto space-y-6">

  <!-- Header -->
  <div class="flex justify-between items-center">
    <div>
      <h2 class="text-xl font-semibold text-slate-800 dark:text-slate-100">
        Expediente del colaborador
      </h2>
      <p class="text-xs text-slate-400">
        Información completa del empleado
      </p>
    </div>

    <!-- Acciones -->
    <div class="flex gap-2">
      <button [routerLink]="['/admin/employees/edit', employee.id_empleado]" class="px-4 py-2 text-xs font-semibold text-white
               bg-orange-500 hover:bg-orange-600 rounded-md transition">
        Editar
      </button>

      <button type="button" (click)="openResetPassword()" class="px-4 py-2 text-xs font-semibold text-white
               bg-amber-500 hover:bg-amber-600 rounded-md transition">
        Resetear contraseña
      </button>

      <button routerLink="/admin/employees"
        class="px-4 py-2 text-xs font-semibold text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-white">
        Volver
      </button>
    </div>
  </div>

  <!-- Loader -->
  <div *ngIf="loading" class="text-slate-400 text-center py-10">
    Cargando información...
  </div>

  <!-- Contenido -->
  <div *ngIf="!loading && employee"
    class="bg-white dark:bg-[#020617] border border-slate-200 dark:border-slate-800 rounded-xl p-8 space-y-8">

    <!-- CONTRATO -->
    <section>
      <h3 class="text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider mb-4">
        Información de contrato
      </h3>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm">
        <div>
          <span class="text-slate-400">Nómina</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.num_nomina }}</strong>
        </div>
        <div>
          <span class="text-slate-400">Rol</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.rol }}</strong>
        </div>
        <div>
          <span class="text-slate-400">Fecha ingreso</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.fecha_ingreso | date:'yyyy-MM-dd' }}</strong>
        </div>
        <div>
          <span class="text-slate-400">Departamento</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.departamento }}</strong>
        </div>
        <div>
          <span class="text-slate-400">Puesto</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.puesto }}</strong>
        </div>
      </div>
    </section>

    <!-- DATOS PERSONALES -->
    <section class="pt-6 border-t border-slate-100 dark:border-slate-800">
      <h3 class="text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider mb-4">
        Datos personales
      </h3>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm">
        <div>
          <span class="text-slate-400">Nombre</span><br>
          <strong class="text-slate-800 dark:text-slate-100">
            {{ employee.nombre }} {{ employee.apellido_paterno }} {{ employee.apellido_materno }}
          </strong>
        </div>
        <div>
          <span class="text-slate-400">Fecha de nacimiento</span><br>
          <strong class="text-slate-800 dark:text-slate-100">
            {{ employee.fecha_nacimiento | date:'yyyy-MM-dd' }}
          </strong>
        </div>

        <div>
          <span class="text-slate-400">Edad</span><br>
          <strong class="text-slate-800 dark:text-slate-100">
            {{ employee.edad }} años
          </strong>
        </div>

        <div>
          <span class="text-slate-400">Sexo</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.sexo }}</strong>
        </div>
        <div>
          <span class="text-slate-400">Estado civil</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.estado_civil }}</strong>
        </div>
        <div>
          <span class="text-slate-400">Nacionalidad</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.nacionalidad }}</strong>
        </div>
      </div>
    </section>

    <!-- CONTACTO -->
    <section class="pt-6 border-t border-slate-100 dark:border-slate-800">
      <h3 class="text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider mb-4">
        Información de contacto
      </h3>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm">
        <div>
          <span class="text-slate-400">Correo</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.correo }}</strong>
        </div>
        <div>
          <span class="text-slate-400">Teléfono</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.telefono }}</strong>
        </div>
        <div class="md:col-span-3">
          <span class="text-slate-400">Domicilio</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.domicilio }}</strong>
        </div>
      </div>
    </section>

    <!-- DOCUMENTOS -->
    <section class="pt-6 border-t border-slate-100 dark:border-slate-800">
      <h3 class="text-xs font-semibold text-slate-600 dark:text-slate-300 uppercase tracking-wider mb-4">
        Documentos oficiales
      </h3>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-sm">
        <div>
          <span class="text-slate-400">RFC</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.rfc }}</strong>
        </div>
        <div>
          <span class="text-slate-400">CURP</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.curp }}</strong>
        </div>
        <div>
          <span class="text-slate-400">NSS</span><br>
          <strong class="text-slate-800 dark:text-slate-100">{{ employee.nss }}</strong>
        </div>
      </div>
    </section>

  </div>
</div>

<div *ngIf="isResettingPassword && employee" class="fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4">
  <div class="w-full max-w-lg rounded-2xl bg-white dark:bg-[#0f172a] border border-slate-200 dark:border-slate-800 p-6">
    <h3 class="text-base font-semibold text-slate-800 dark:text-white">
      Resetear contraseña
    </h3>

    <p class="mt-2 text-sm text-slate-500 dark:text-slate-400">
      Empleado:
      <span class="font-semibold text-slate-700 dark:text-slate-200">
        {{ employee.nombre }} {{ employee.apellido_paterno }}
      </span>
      ({{ employee.num_nomina }})
    </p>

    <div class="mt-5 space-y-4">
      <div>
        <label class="block text-xs font-semibold text-slate-500 mb-1">Nueva contraseña</label>
        <input type="password" [(ngModel)]="resetPasswordData.newPassword"
          class="w-full bg-white border border-slate-200 rounded-md px-3 py-2 text-sm text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-slate-300 focus:border-slate-300 transition dark:bg-slate-900 dark:border-slate-700 dark:text-white"
          placeholder="Mínimo 4 caracteres">
      </div>

      <div>
        <label class="block text-xs font-semibold text-slate-500 mb-1">Confirmar contraseña</label>
        <input type="password" [(ngModel)]="resetPasswordData.confirmPassword"
          class="w-full bg-white border border-slate-200 rounded-md px-3 py-2 text-sm text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-slate-300 focus:border-slate-300 transition dark:bg-slate-900 dark:border-slate-700 dark:text-white"
          placeholder="Repite la nueva contraseña">
      </div>
    </div>

    <div class="mt-6 flex justify-end gap-3">
      <button type="button" (click)="cancelResetPassword()"
        class="px-4 py-2 text-xs font-semibold text-slate-600 dark:text-slate-300 hover:text-slate-800 dark:hover:text-white">
        Cancelar
      </button>

      <button type="button" (click)="saveResetPassword()"
        class="px-6 py-2 text-xs font-semibold text-white bg-amber-500 hover:bg-amber-600 rounded-md">
        Guardar nueva contraseña
      </button>
    </div>
  </div>
</div>
