<div class="min-h-screen bg-slate-50 font-['Plus_Jakarta_Sans'] pb-24 pt-12">

  <div class="max-w-3xl mx-auto px-6">

    <!-- HEADER MEJORADO -->
    <div class="mb-12 text-center">
      <h2 class="text-3xl font-bold text-slate-800">
        Buzón de Sugerencias
      </h2>
      <p class="text-sm text-slate-500 mt-3 max-w-lg mx-auto">
        Comparte tu opinión de forma anónima. Tu retroalimentación nos ayuda a mejorar.
      </p>
    </div>

    <!-- CARD ORIGINAL PERO REFINADO -->
    <div class="bg-white
                rounded-3xl
                shadow-2xl shadow-slate-200/60
                border border-slate-100
                p-8 md:p-12
                transition-all">

      <form (ngSubmit)="enviarMensaje()" #buzonForm="ngForm" class="space-y-10">

        <!-- MENSAJE -->
        <div>
          <label class="block text-sm font-extrabold text-slate-700 mb-3 uppercase tracking-tight">
            Tu sugerencia o comentario
          </label>

          <textarea
            name="comentario"
            [(ngModel)]="comentario"
            required
            rows="6"
            class="w-full px-5 py-4
                   rounded-2xl
                   border border-slate-200
                   bg-slate-50
                   text-sm text-slate-700
                   focus:ring-4 focus:ring-[#e67e22]/20
                   focus:border-[#e67e22]
                   outline-none
                   transition-all
                   resize-none"
            placeholder="Describe detalladamente tu observación...">
          </textarea>
        </div>

        <!-- IMAGEN -->
        <div>
          <label class="block text-sm font-extrabold text-slate-700 mb-3 uppercase tracking-tight">
            Adjuntar imagen (opcional)
          </label>

          <div class="relative">
            <div
              class="flex flex-col items-center justify-center
                     w-full min-h-[170px]
                     border-2 border-dashed border-slate-300
                     rounded-2xl
                     bg-slate-50
                     hover:bg-orange-50/40
                     hover:border-[#e67e22]
                     transition-all cursor-pointer relative overflow-hidden">

              <!-- SIN IMAGEN -->
              <div *ngIf="!imagePreview" class="flex flex-col items-center py-8">
                <p class="text-sm font-semibold text-slate-600">
                  Subir imagen
                </p>
                <p class="text-xs text-slate-400 mt-2">
                  JPG o PNG (máx. 5MB)
                </p>
              </div>

              <!-- CON IMAGEN -->
              <div *ngIf="imagePreview"
                   class="w-full p-5 flex items-center justify-between bg-orange-50/40 rounded-2xl">

                <div class="flex items-center gap-4">
                  <img [src]="imagePreview"
                       class="w-20 h-20 object-cover rounded-xl shadow-md">

                  <p class="text-xs font-bold text-slate-700 truncate max-w-[180px]">
                    {{ selectedFile?.name }}
                  </p>
                </div>

                <button
                  type="button"
                  (click)="removeImage()"
                  class="px-4 py-2
                         bg-red-100
                         text-red-600
                         rounded-lg
                         text-xs font-bold
                         hover:bg-red-200
                         transition-all">
                  Eliminar
                </button>
              </div>

              <input
                type="file"
                accept="image/png,image/jpeg"
                (change)="onFileSelected($event)"
                class="absolute inset-0 w-full h-full opacity-0 cursor-pointer">
            </div>
          </div>

          <p *ngIf="errorMessage"
             class="text-red-500 text-xs mt-3 font-bold">
            {{ errorMessage }}
          </p>
        </div>

        <!-- BOTÓN ORIGINAL PERO MÁS FINO -->
        <div class="pt-6">
          <button
            type="submit"
            [disabled]="!buzonForm.valid || isSending || errorMessage"
            class="w-full py-5
                   bg-[#e67e22]
                   text-white
                   text-lg font-black
                   rounded-2xl
                   hover:bg-[#d35400]
                   hover:shadow-lg hover:shadow-orange-200/50
                   transition-all
                   disabled:opacity-50">

            {{ isSending ? 'ENVIANDO...' : 'ENVIAR DE FORMA ANÓNIMA' }}
          </button>
        </div>

      </form>
    </div>
  </div>
</div>


<!-- TOAST REFINADO -->
<div *ngIf="showToast" class="fixed bottom-10 right-10 z-50">
  <div
    [ngClass]="toastType === 'success' ? 'bg-emerald-500' : 'bg-red-500'"
    class="px-6 py-4 rounded-2xl shadow-xl text-white font-bold text-sm">
    {{ toastMessage }}
  </div>
</div>