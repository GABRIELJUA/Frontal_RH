<div class="space-y-6">

  <!-- Header del m√≥dulo -->
  <div class="flex items-center justify-between">
    <div>
      <h2 class="text-xl font-semibold text-slate-800 dark:text-white">
        Gesti√≥n de Personal
      </h2>
      <p class="text-xs text-slate-400 mt-1">
        Administraci√≥n de empleados registrados en el sistema
      </p>
    </div>

    

    <div class="flex items-center gap-2">

      <button (click)="exportarExcel()" class="inline-flex items-center gap-2 px-3 py-2 text-xs font-semibold
             border border-slate-200 dark:border-slate-700
             text-slate-600 dark:text-slate-300
             bg-white dark:bg-slate-900
             rounded-md
             hover:bg-slate-100 dark:hover:bg-slate-800
             transition">

        <svg class="w-4 h-4 text-emerald-600" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 10v6m0 0l-3-3m3 3l3-3M4 4h16v4H4z" />
        </svg>

        Exportar
      </button>

      <a *ngIf="canCreate" routerLink="/admin/employees/create" class="inline-flex items-center gap-2 px-4 py-2 text-xs font-semibold
                bg-orange-500 text-white rounded-md
                hover:bg-orange-600 transition">
        + Nuevo empleado
      </a>

    </div>
  </div>

  <!-- üîé FILTROS -->
  <div class="bg-white dark:bg-[#020617]
              border border-slate-200 dark:border-slate-800
              rounded-xl p-4">

    <div class="flex flex-col md:flex-row gap-4">

      <!-- Buscador -->
      <div class="relative flex-1">

        <input type="text" [(ngModel)]="searchTerm" (input)="aplicarFiltros()"
          placeholder="Buscar por nombre o puesto..." class="w-full pl-10 pr-4 py-2 text-sm
                 bg-slate-50 dark:bg-slate-900
                 border border-slate-200 dark:border-slate-700
                 rounded-lg
                 focus:outline-none focus:ring-2 focus:ring-orange-500/20 
                 text-slate-700 dark:text-slate-200
                 placeholder-slate-400 transition" />

        <svg class="absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400" fill="none" stroke="currentColor"
          stroke-width="2" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-4.35-4.35M11 19a8 8 0 100-16 8 8 0 000 16z" />
        </svg>

      </div>

      <!-- Departamento -->
      <div class="w-full md:w-64">

        <select [(ngModel)]="departamentoSeleccionado" (change)="aplicarFiltros()" class="w-full px-3 py-2 text-sm
                 bg-slate-50 dark:bg-slate-900
                 border border-slate-200 dark:border-slate-700
                 rounded-lg
                 focus:outline-none focus:ring-2 focus:ring-orange-500/20
                 text-slate-700 dark:text-slate-200
                 transition">

          <option value="">Todos los departamentos</option>

          <option *ngFor="let d of departamentos" [value]="d">
            {{ d }}
          </option>

        </select>

      </div>

    </div>
  </div>
  <div class="bg-white dark:bg-[#020617] border border-slate-200 dark:border-slate-800 rounded-xl overflow-hidden">
    <!-- Estados -->
    <div *ngIf="loading" class="p-10 text-center text-slate-400 text-sm">
      Cargando empleados‚Ä¶
    </div>
    <div *ngIf="errorMessage" class="p-6 text-red-600 text-sm font-semibold">
      {{ errorMessage }}
    </div>

    <!-- Tabla -->
    <div *ngIf="!loading && employees.length" class="overflow-x-auto">

      <table class="min-w-full text-sm">

        <!-- Header tabla -->
        <thead class="bg-slate-50 dark:bg-slate-900 border-b border-slate-200 dark:border-slate-800">
          <tr class="text-xs text-slate-500 dark:text-slate-400 uppercase tracking-wider">
            <th class="px-6 py-3 text-left">N√≥mina</th>
            <th class="px-6 py-3 text-left">Empleado</th>
            <th class="px-6 py-3 text-left">Puesto</th>
            <th class="px-6 py-3 text-left">Departamento</th>
            <th class="px-6 py-3 text-left">Rol</th>
            <th class="px-6 py-3 text-center">Acciones</th>
          </tr>
        </thead>


        <tbody class="divide-y divide-slate-100 dark:divide-slate-800">

          <tr *ngFor="let e of employees" class="hover:bg-slate-50 dark:hover:bg-slate-900 transition">

            <td class="px-6 py-4 font-mono text-xs text-slate-500 dark:text-slate-400">
              {{ e.num_nomina }}
            </td>

            <td class="px-6 py-4">
              <div class="font-medium text-slate-800 dark:text-white">
                {{ e.nombre }} {{ e.apellido_paterno }}
              </div>
              <div class="text-xs text-slate-400">
                {{ e.correo }}
              </div>
            </td>

            <td class="px-6 py-4 text-slate-700 dark:text-slate-300">
              {{ e.puesto }}
            </td>

            <td class="px-6 py-4 text-slate-700 dark:text-slate-300">
              {{ e.departamento }}
            </td>
            <!-- Rol -->
            <td class="px-6 py-4">
              <span class="inline-flex items-center px-2.5 py-1 rounded-full text-[11px] font-semibold
                      bg-green-50 text-green-700
                      dark:bg-green-900/30 dark:text-green-400">
                Empleado
              </span>
            </td>

            <!-- Acci√≥n VER -->
            <td class="px-6 py-4 text-center">
              <a [routerLink]="['/admin/employees', e.id_empleado]"
                class="text-xs font-semibold text-blue-600 hover:text-blue-800 dark:text-orange-400 dark:hover:text-orange-300 transition">
                Ver
              </a>
            </td>

          </tr>

        </tbody>
      </table>

    </div>
  </div>
</div>
<div *ngIf="!loading && !employees.length" class="p-10 text-center text-slate-400 text-sm">
  No hay empleados registrados.
</div>